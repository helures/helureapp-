<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TonTransfers - Secure Deals</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet" />
<style>
  :root {
    --bg-color: #0f0f12;
    --card-color: #1a1a1f;
    --primary-color: #0088cc;
    --ton-color: #0088cc;
    --text-color: #ffffff;
    --secondary-text: #a1a1a8;
    --border-radius: 16px;
    --padding: 16px;
    --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  }
  * {
    margin: 0; padding: 0; box-sizing: border-box;
    font-family: 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif;
  }
  body {
    background-color: var(--bg-color);
    color: var(--text-color);
    min-height: 100vh;
    padding: var(--padding);
    line-height: 1.6;
  }
  .container {
    max-width: 600px;
    margin: 0 auto;
    animation: fadeIn 0.5s ease-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 24px;
    padding: 12px 0;
  }
  .logo {
    display: flex;
    align-items: center;
    font-size: 22px;
    font-weight: 700;
    background: linear-gradient(90deg, var(--ton-color), #29a7ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .logo-icon {
    width: 28px;
    height: 28px;
    margin-right: 10px;
    background-color: var(--ton-color);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .logo-icon svg {
    width: 16px;
    height: 16px;
    fill: white;
  }
  .user-balance {
    background-color: rgba(0, 136, 204, 0.1);
    padding: 8px 12px;
    border-radius: var(--border-radius);
    font-size: 14px;
    font-weight: 600;
    display: flex;
    align-items: center;
  }
  .user-balance svg {
    margin-right: 6px;
  }
  .btn {
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    padding: 14px 16px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 136, 204, 0.2);
  }
  .btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 136, 204, 0.2);
  }
  .btn svg {
    margin-right: 8px;
  }
  .btn-secondary {
    background-color: var(--card-color);
    color: var(--text-color);
  }
  .card {
    background-color: var(--card-color);
    border-radius: var(--border-radius);
    padding: var(--padding);
    margin-bottom: 16px;
    transition: var(--transition);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  }
  .card-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
  }
  .card-title svg {
    margin-right: 8px;
  }
  .input-group {
    margin-bottom: 20px;
  }
  label {
    display: block;
    margin-bottom: 8px;
    color: var(--secondary-text);
    font-size: 14px;
    font-weight: 500;
  }
  input, textarea, select {
    width: 100%;
    padding: 14px;
    border-radius: var(--border-radius);
    border: 1px solid #3a3a40;
    background-color: #2e2e33;
    color: var(--text-color);
    font-size: 16px;
    transition: var(--transition);
  }
  input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(0, 136, 204, 0.2);
  }
  textarea {
    min-height: 120px;
    resize: vertical;
  }
  .deal-card {
    border-left: 4px solid var(--primary-color);
    cursor: pointer;
  }
  .deal-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
  }
  .deal-label {
    color: var(--secondary-text);
    font-size: 13px;
  }
  .deal-value {
    font-weight: 600;
  }
  .status {
    display: inline-block;
    padding: 6px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    margin-top: 8px;
  }
  .status-created {
    background-color: rgba(0, 136, 204, 0.2);
    color: var(--primary-color);
  }
  .tabs {
    display: flex;
    margin-bottom: 16px;
    border-bottom: 1px solid #3a3a40;
  }
  .tab {
    padding: 12px 16px;
    cursor: pointer;
    position: relative;
    font-weight: 600;
    transition: var(--transition);
    color: var(--secondary-text);
  }
  .tab:hover {
    color: var(--primary-color);
  }
  .tab.active {
    color: var(--primary-color);
  }
  .tab.active:after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    background-color: var(--primary-color);
    animation: tabUnderline 0.3s ease-out;
  }
  @keyframes tabUnderline {
    from { transform: scaleX(0); }
    to { transform: scaleX(1); }
  }
  .empty-state {
    text-align: center;
    padding: 60px 0;
    color: var(--secondary-text);
    animation: fadeIn 0.8s ease-out;
  }
  .empty-state svg {
    margin-bottom: 16px;
    opacity: 0.6;
  }
  .empty-state p {
    margin-top: 12px;
    font-size: 15px;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="none" fill="white"/>
            <path d="M12 6L12 12L16 14" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        TonTransfers
      </div>
      <div class="user-balance" id="userBalance" title="Баланс TON">
        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" style="margin-right:4px;">
          <path d="M12 22L5 12L12 2L19 12L12 22Z" />
        </svg>
        0.000 TON
      </div>
    </div>

    <div class="tabs">
      <div class="tab active" data-tab="deals">Мои сделки</div>
      <div class="tab" data-tab="create">Создать сделку</div>
    </div>

    <div id="contentDeals">
      <!-- Здесь будут сделки -->
      <div class="empty-state">
        <svg width="80" height="80" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
          <path d="M4 4H20V20H4V4Z" />
          <path d="M8 12L16 12" />
          <path d="M12 8L12 16" />
        </svg>
        <p>Пока нет сделок. Создайте первую!</p>
      </div>
    </div>

    <div id="contentCreate" style="display:none;">
      <div class="card">
        <div class="card-title">
          Создать новую сделку
        </div>
        <form id="dealForm">
          <div class="input-group">
            <label for="dealTitle">Описание сделки (что покупаете/продаёте)</label>
            <input type="text" id="dealTitle" name="dealTitle" placeholder="Например: 10 Коллекционных NFT Pepe" required autocomplete="off" />
          </div>
          <div class="input-group">
            <label for="dealPrice">Цена в TON</label>
            <input type="number" id="dealPrice" name="dealPrice" placeholder="0.0" step="0.001" min="0" required autocomplete="off" />
          </div>
          <div class="input-group">
            <label for="dealWallet">TON кошелек для сделки</label>
            <input type="text" id="dealWallet" name="dealWallet" placeholder="Введите адрес TON кошелька" required autocomplete="off" />
          </div>
          <button type="submit" class="btn">Создать сделку</button>
        </form>
      </div>
    </div>
  </div>

<script>
  // Переключение вкладок
  const tabs = document.querySelectorAll('.tab');
  const contentDeals = document.getElementById('contentDeals');
  const contentCreate = document.getElementById('contentCreate');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      if (tab.dataset.tab === 'deals') {
        contentDeals.style.display = 'block';
        contentCreate.style.display = 'none';
      } else {
        contentDeals.style.display = 'none';
        contentCreate.style.display = 'block';
      }
    });
  });

  // Обработка отправки формы
  const dealForm = document.getElementById('dealForm');
  dealForm.addEventListener('submit', (e) => {
    e.preventDefault();

    const dealTitle = dealForm.dealTitle.value.trim();
    const dealPrice = dealForm.dealPrice.value.trim();
    const dealWallet = dealForm.dealWallet.value.trim();

    if (!dealTitle || !dealPrice || !dealWallet) {
      alert('Пожалуйста, заполните все поля.');
      return;
    }

    // Формируем объект сделки
    const dealData = {
      action: 'create_deal',
      description: dealTitle,
      price: dealPrice,
      wallet: dealWallet,
      timestamp: Date.now()
    };

    // Отправляем данные в Telegram-бот
    if (window.Telegram && Telegram.WebApp && Telegram.WebApp.sendData) {
      Telegram.WebApp.sendData(JSON.stringify(dealData));
      // Можно показать пользователю сообщение, очистить форму, закрыть веб-приложение и т.п.
      alert('Данные сделки отправлены боту!');
      dealForm.reset();
    } else {
      alert('Ошибка: Telegram WebApp API не найден.');
    }
  });

  // Можно добавить здесь логику обновления баланса или загрузки сделок с сервера
  // Для примера поставим баланс
  const userBalanceElem = document.getElementById('userBalance');
  // Тут можно подставить реальный баланс, например:
  userBalanceElem.innerHTML = `
    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" style="margin-right:4px;">
      <path d="M12 22L5 12L12 2L19 12L12 22Z" />
    </svg>
    123.456 TON
  `;

</script>
</body>
</html>
